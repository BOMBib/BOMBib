<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- CSS only -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" integrity="sha384-YdM/o2MTG+kIKs1sV/gSEWXZo5d1DdBeuo/6s8qMJd5I5FKkStdHSXeNukljrWUZ" crossorigin="anonymous">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsuites@3.9.9/dist/jsuites.css" integrity="sha384-Q4MotJ+2ng2wWCfTpgUJTVw6L4eDgNWKv+m3PGUiH2C++49ZcqJbtRnTlTQY/Ujw" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jexcel/4.5.2/jexcel.min.css" integrity="sha512-WB/kEaOfg0GNR4kgcutxGokTJwOHScl+1IWlUwobvYi8USQ2ML9mn3794NPSpInbVc6ISnUM6kXZq7hg6Vk1vg==" crossorigin="anonymous" />
        <style media="screen">
            .jexcel_content table {
                width: 100%;
            }
            .jexcel>tbody>tr>td.readonly {
                color: black;
                background-color: #f3f3f3;
            }
            tr.unused_part_row>td:not(.jexcel_row) {
                color: lightgray !important;
            }

            #libraryTagFilterDiv .form-check-label {
                width: 5em;
            }

        </style>
        <title>BOMBib</title>
    </head>
    <body>
        <div class="position-absolute" style="z-index: 99; right:0; pointer-events: none;" >
            <svg viewBox="0 0 149 149" height="149" width="149" xmlns="http://www.w3.org/2000/svg" alt="Fork me on GitHub">
                <image loading="lazy" x="0" y="0" width="149" height="149" href="https://github.blog/wp-content/uploads/2008/12/forkme_right_gray_6d6d6d.png?resize=149%2C149"/>
                <a href="https://github.com/BOMBib/BOMBib" target="_blank"><polygon points="16,0 149,133 149,0" style="pointer-events: auto; fill: transparent; stroke: none;"/></a>
            </svg>
        </div>
        <div class="container-fluid">
            <h1 class="display-1">BOMBib <small class="text-muted">a library for BOMs</small></h1>
            <ul class="nav nav-tabs mb-3" id="tabs" role="tablist">
                <li class="nav-item ms-3" role="presentation">
                    <a class="nav-link active" id="intro-tab" href="#intro" data-bs-target="#intro-tab-pane" role="tab" aria-controls="intro-tab-pane" aria-selected="false">Intro</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" id="bib-tab" href="#bib" data-bs-target="#bib-tab-pane" role="tab" aria-controls="bib-tab-pane" aria-selected="false">Library</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" id="bom-tab" href="#boms" data-bs-target="#bom-tab-pane" role="tab" aria-controls="bom-tab-pane" aria-selected="false">BOMs</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="intro-tab-pane" role="tabpanel" aria-labelledby="intro-tab">
                    <p>This is only a first experimental version showing the idea of having a library of BOMs, that then can be added to a combined BOM, that allows to calculate part counts and costs.</p>
                    <p>The structure of the combined BOM is inspired by the "Modular in a Week"-Excel Sheet.</p>
                    <p>What works</p>

                    <ul>
                        <li>Displaying a list of projects that are loaded from the repository</li>
                        <li>Clicking on a project and adding it to the BOM</li>
                        <li>When adding a project the Project-BOM is somewhat merged into the existing table</li>
                        <li>Loading comments/note from BOM</li>
                        <li>Showing more information in the project dialog, like description, project links, project bom, ...</li>
                        <li>Automatic sorting of rows based on category and values</li>
                        <li>Somewhat persistent saving of the BOM and selected projects</li>
                        <li>Showing Project Titles in the BOM-Tab</li>
                        <li>Synchronisation between multiple Tabs/Windows</li>
                        <li>Custom context menu that prevents deleting locked rows and columns</li>
                    </ul>
                    <p>Whats missing in no particular order:</p>
                    <ul>
                        <li>Allow projects to reference other projects. E.g. because they are an extension</li>
                        <li>Allow to mark projects as favorites, show list of favorites</li>
                        <li>Mark projects in library that are already in BOM or favorites</li>
                        <li>More projects in the library</li>
                        <li>Form to add new projects</li>
                        <li>Search and Filter functions for the library</li>
                        <li>Function to merge 2 rows, because they represent the same component but weren't automatically merged</li>
                        <li>Default values for component costs</li>
                        <li>More Categorys</li>
                        <li>More Tags</li>
                        <li>Advanced Functionality:</li>
                        <ul>
                            <li>Creating a Master-Gist</li>
                            <li>Use GitHub-API to query all Forks of Master-Gist</li>
                            <li>Treat Forks of master gists as user contributed projects</li>
                            <li>Show star/comment count for gist-projects</li>
                            <li>Allow to Login with GitHub-Account using <a href="https://github.com/openid/AppAuth-JS" target="_blank">AppAuth-JS</a></li>
                            <li>Create forks of master-Gist/new gist-projects directly from the webapp</li>
                        </ul>
                    </ul>
                </div>
                <div class="tab-pane" id="bib-tab-pane" role="tabpanel" aria-labelledby="bib-tab">
                    <div class="row">
                        <div class="col-12">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="searchProjectInput" placeholder="...">
                                <label for="searchProjectInput">Search</label>
                            </div>
                        </div>
                        <div class="col-lg-2">
                            <legend>Tags</legend>
                            <div id="libraryTagFilterDiv">
                                <div class="spinner-border" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-10">
                            <legend>Projects</legend>
                            <div class="list-group" id="projectListGroup">
                                <div class="list-group-item"><div class="d-flex justify-content-center">
                                    <div class="spinner-border" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div></div>
                                </div>
                                <template id="projectListGroupItemTemplate">
                                    <a class="list-group-item list-group-item-action" href="#">
                                        <div class="d-flex w-100 justify-content-between">
                                            <h5 class="mb-1 projecttitle"></h5>
                                        </div>
                                        <small class="text-muted projectauthor me-3" title="Author"></small>
                                        <span class="projecttags"></span>
                                    </a>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane overflow-auto" id="bom-tab-pane" role="tabpanel" aria-labelledby="bom-tab">
                    <div id="spreadsheet"></div>
                    <button type="button" class="btn m-1 btn-primary" onclick="addNewProjectColumn()">Add blank project Column</button>
                    <button type="button" class="btn m-1 btn-secondary" onclick="sortBOMRows()">Sort BOM Rows</button>
                    <button type="button" class="btn m-1 btn-danger" onclick="clearBOMTable()">Clear Table</button>
                </div>
            </div>
        </div>
        <div class="modal fade" tabindex="-1" aria-hidden="true"  id="projectModal">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <div>
                            <h5 class="modal-title">Project title...</h5>
                            <small>by
                                <a tabindex="0" class="projectauthor" role="button"
                                data-bs-toggle="popover" data-bs-trigger="focus"
                                title="Title" data-bs-content="Content"
                                data-bs-html="true">Author Name</a><span class="projectiscommitted">
                                            committed by <a
                                                tabindex="0" class="projectcommitter" role="button"
                                                data-bs-toggle="popover" data-bs-trigger="focus" title="Title"
                                                data-bs-content="Content" data-bs-html="true" ></a>
                                    </span>
                            </small>
                        </div>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="visually-hidden">Loading...</span>
                          </div>
                        </div>
                        <div class="projectdescription">Project description, author, project links, project BOM</div>
                        <div class="table-responsive">
                            <table class="projectbom table">
                                <thead>
                                    <tr>
                                        <th>Category</th>
                                        <th>Value</th>
                                        <th>Spec</th>
                                        <th>Count</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="addProjectToBomButton" disabled>
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"><span class="visually-hidden">Loading...</span></span>
                            Add Project to BOMs
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/@srounce/broadcastchannel@1.0.2/index.min.js" integrity="sha384-NF4WXq4kkoW0EI0toPg4nUsypfcoa/JZ1x+EnYvCmIR+8HovgTmYgb+slRsJJL2Z" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/jsuites@3.9.9/dist/jsuites.min.js" integrity="sha384-EI24PwcDPRM41Kn36OjdrIybm1cS60wx9u3cEIp2IMqMGtcG5SqjAFp9MeBtLmVR" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jexcel/4.5.2/jexcel.min.js" integrity="sha512-wMMvCzGFoMkqblq/fcXTGli56kJQGAXsP6c2oriVYpzjXC/g6JRlvJe7zVoQZsOadgxECkr5tf4DIaJjofYGlA==" crossorigin="anonymous"></script>
        <script type="text/javascript" src="src/config.json.js"></script>
        <script type="text/javascript" src="src/bomtable.js"></script>
        <script type="text/javascript" src="src/index.js"></script>
    </body>
</html>
